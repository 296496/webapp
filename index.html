<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Dice Roller</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Google Font for the title (Luckiest Guy) -->
    <link href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* Custom Tailwind Configuration */
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        title: ['"Luckiest Guy"', 'cursive'],
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
        
        /* Custom Styles for Button and Dice */

        /* Custom Button Style matching the image's blue gradient/shadow (slightly refined for professionalism) */
        #roll-button {
            box-shadow: 0 4px 0 0 #0d6db3, 0 6px 12px rgba(0, 0, 0, 0.2); /* Deeper shadow */
            background-image: linear-gradient(to top, #1a9cff 0%, #007bff 100%);
            transition: all 0.1s ease-in-out;
        }

        #roll-button:active {
            transform: translateY(4px);
            box-shadow: 0 0px 0 0 #0d6db3;
        }

        /* Dice Face Styling - Base position for dots */
        .dice-dot {
            fill: #333; /* Dark dot color */
            transition: opacity 0.1s;
        }

        /* Animation for the "rolling" effect (applied to dice-container) */
        @keyframes diceShake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

        .rolling {
            animation: diceShake 0.1s infinite;
        }

        /* Style for the numerical display frame */
        #result-display-frame {
            border: 4px solid #333;
            border-radius: 12px;
            position: relative;
            background-color: white;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        
        /* Positioning the red corner markers */
        .red-corner-tl { top: -8px; left: -8px; }
        .red-corner-br { bottom: -8px; right: -8px; }

        /* The specific red squares shown in the image */
        .red-corner-tl::before { content: ''; position: absolute; width: 16px; height: 16px; background-color: #ff0000; clip-path: polygon(0 0, 100% 0, 100% 100%); }
        .red-corner-br::before { content: ''; position: absolute; width: 16px; height: 16px; background-color: #ff0000; clip-path: polygon(100% 0, 0 0, 100% 100%); }

    </style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col items-center p-6 font-sans">

    <!-- Main Container -->
    <div class="w-full max-w-sm flex flex-col items-center pt-8">
        
        <!-- Title -->
        <h1 class="text-4xl sm:text-5xl font-title text-gray-800 tracking-wider mb-8">DICE ROLLER</h1>

        <!-- Dice Selection -->
        <div class="flex space-x-3 mb-10 w-full justify-center">
            <button 
                id="die-button-6" 
                class="die-select-button px-4 py-2 rounded-lg font-bold text-sm shadow-md transition-colors"
                onclick="selectDie(6)"
            >
                D6
            </button>
            <button 
                id="die-button-10" 
                class="die-select-button px-4 py-2 rounded-lg font-bold text-sm shadow-md transition-colors bg-gray-200 text-gray-800"
                onclick="selectDie(10)"
            >
                D10
            </button>
            <button 
                id="die-button-20" 
                class="die-select-button px-4 py-2 rounded-lg font-bold text-sm shadow-md transition-colors bg-gray-200 text-gray-800"
                onclick="selectDie(20)"
            >
                D20
            </button>
        </div>

        <!-- Dice Visualization (SVG) - Always renders a D6 for the visual component -->
        <div id="dice-container" class="relative w-40 h-40 sm:w-48 sm:h-48 mb-12 transform transition-transform duration-300 ease-in-out">
            <svg id="dice-svg" viewBox="0 0 100 100" class="w-full h-full shadow-lg rounded-2xl" 
                 style="background-color: #f7f7f7; border: 4px solid #b0b0b0; box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);">
                <defs>
                    <!-- Dot template for easy reuse -->
                    <circle id="dot" r="6" class="dice-dot"/>
                </defs>

                <!-- Die dots (positions based on a 100x100 grid) -->
                <use href="#dot" x="50" y="50" id="dot-c"/>
                <use href="#dot" x="25" y="25" id="dot-tl"/>
                <use href="#dot" x="75" y="75" id="dot-br"/>
                <use href="#dot" x="75" y="25" id="dot-tr"/>
                <use href="#dot" x="25" y="75" id="dot-bl"/>
                <use href="#dot" x="25" y="50" id="dot-cl"/>
                <use href="#dot" x="75" y="50" id="dot-cr"/>
            </svg>
        </div>

        <!-- Roll Button -->
        <button 
            id="roll-button" 
            class="text-xl sm:text-2xl font-bold text-white rounded-full px-12 py-3 mb-20 uppercase tracking-widest"
            onclick="startRoll()"
        >
            ROLL
        </button>

        <!-- Numerical Result Display (matching the bottom image element) -->
        <div id="result-display-frame" class="w-40 h-40 sm:w-48 sm:h-48 flex items-center justify-center relative">
            
            <!-- Red corner markers -->
            <div class="absolute red-corner-tl w-4 h-4 rounded-sm"></div>
            <div class="absolute red-corner-br w-4 h-4 rounded-sm"></div>

            <!-- Numerical Result -->
            <p id="roll-result-text" class="text-7xl sm:text-8xl font-black text-gray-900 select-none">1</p>
        </div>
    </div>

    <!-- Message Box for custom alerts -->
    <div id="message-box" class="fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white p-6 rounded-lg shadow-2xl max-w-sm mx-4 text-center">
            <p id="message-content" class="text-lg font-semibold mb-4">Message</p>
            <button onclick="hideMessage()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">OK</button>
        </div>
    </div>

    <script>
        const diceSvg = document.getElementById('dice-svg');
        const rollButton = document.getElementById('roll-button');
        const resultText = document.getElementById('roll-result-text');
        
        let currentMaxRoll = 6; // State: Max value of the current die selection

        // Define the dots for easy manipulation
        const dots = {
            'c': document.getElementById('dot-c'), 'tl': document.getElementById('dot-tl'),
            'tr': document.getElementById('dot-tr'), 'bl': document.getElementById('dot-bl'),
            'br': document.getElementById('dot-br'), 'cl': document.getElementById('dot-cl'),
            'cr': document.getElementById('dot-cr'),
        };

        // Configuration for dot visibility for each dice face (1-6)
        const faceConfigs = {
            0: { c: 0, tl: 0, tr: 0, bl: 0, br: 0, cl: 0, cr: 0 }, // Used to hide dots for non-d6
            1: { c: 1, tl: 0, tr: 0, bl: 0, br: 0, cl: 0, cr: 0 },
            2: { c: 0, tl: 1, tr: 0, bl: 0, br: 1, cl: 0, cr: 0 },
            3: { c: 1, tl: 1, tr: 0, bl: 0, br: 1, cl: 0, cr: 0 },
            4: { c: 0, tl: 1, tr: 1, bl: 1, br: 1, cl: 0, cr: 0 },
            5: { c: 1, tl: 1, tr: 1, bl: 1, br: 1, cl: 0, cr: 0 },
            6: { c: 0, tl: 1, tr: 1, bl: 1, br: 1, cl: 1, cr: 1 },
        };

        /**
         * Updates the visual appearance of the SVG die face.
         * @param {number} face The number (0-6) to display. Use 0 to hide all dots.
         */
        function setDiceFace(face) {
            const config = faceConfigs[face] || faceConfigs[0];
            
            for (const key in config) {
                if (dots[key]) {
                    dots[key].style.opacity = config[key];
                }
            }
        }
        
        /**
         * Selects the die type and updates the visual state.
         * @param {number} max The maximum value of the die (6, 10, or 20).
         */
        function selectDie(max) {
            currentMaxRoll = max;
            
            // Update button visual state (highlight the selected button)
            document.querySelectorAll('.die-select-button').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white', 'shadow-inner');
                btn.classList.add('bg-gray-200', 'text-gray-800');
            });
            document.getElementById(`die-button-${max}`).classList.add('bg-blue-600', 'text-white', 'shadow-inner');
            document.getElementById(`die-button-${max}`).classList.remove('bg-gray-200', 'text-gray-800');
            
            // Reset display on selection change
            setDiceFace(1);
            resultText.textContent = 1;
            
            // Update the roll button text dynamically
            rollButton.textContent = `ROLL D${max}`;
        }

        // Custom modal functions (included for completeness, though not strictly used in startRoll)
        function showMessage(msg) {
            document.getElementById('message-content').textContent = msg;
            document.getElementById('message-box').classList.remove('hidden');
            document.getElementById('message-box').classList.add('flex');
        }

        function hideMessage() {
            document.getElementById('message-box').classList.add('hidden');
            document.getElementById('message-box').classList.remove('flex');
        }


        /**
         * Initiates the visual dice roll animation and calculates the result.
         */
        function startRoll() {
            if (rollButton.disabled) return;
            
            // Disable button during roll
            rollButton.disabled = true;
            rollButton.classList.add('opacity-50', 'cursor-not-allowed');
            
            const isD6 = currentMaxRoll === 6;
            
            // Add the shaking animation class to the visual container
            diceSvg.classList.add('rolling');
            
            let flashCount = 0;
            const rollDuration = 1000;
            const flashInterval = 80;

            const flashFaces = setInterval(() => {
                
                flashCount++;

                // 1. Flash the result number quickly
                const tempResult = Math.floor(Math.random() * currentMaxRoll) + 1;
                resultText.textContent = tempResult;

                // 2. Flash the d6 dots only if a d6 is selected
                if (isD6) {
                    const tempFace = Math.floor(Math.random() * 6) + 1;
                    setDiceFace(tempFace);
                }
                
                // Stop flashing before the end of the duration
                if (flashCount * flashInterval > rollDuration - 100) {
                    clearInterval(flashFaces);
                }
            }, flashInterval);

            // Calculate final result and stop animation
            setTimeout(() => {
                clearInterval(flashFaces); // Ensure flashing stops

                // 1. Calculate final random result
                const finalResult = Math.floor(Math.random() * currentMaxRoll) + 1;

                // 2. Set the final visual dice face:
                if (isD6) {
                    setDiceFace(finalResult); // Show final face for d6
                } else {
                    setDiceFace(0); // Hide dots for polyhedral dice
                }

                // 3. Remove the rolling animation
                diceSvg.classList.remove('rolling');
                
                // 4. Update the numerical display (always)
                resultText.textContent = finalResult;

                // 5. Re-enable the button
                rollButton.disabled = false;
                rollButton.classList.remove('opacity-50', 'cursor-not-allowed');
                
            }, rollDuration);
        }

        // Initialize the die to D6 on page load
        window.onload = () => {
            selectDie(6); 
        };
        
    </script>
</body>
</html>